<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 5.0.0 (20220707.1540)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="4427pt" height="2258pt"
 viewBox="0.00 0.00 4427.09 2257.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2253.6)">
<title>UmlClassDiagram</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-2253.6 4423.09,-2253.6 4423.09,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="black" points="0,-221.5 0,-715.9 465.16,-715.9 465.16,-221.5 0,-221.5"/>
<text text-anchor="middle" x="232.58" y="-699.3" font-family="Times,serif" font-size="14.00">DatabaseManager</text>
<text text-anchor="middle" x="232.58" y="-682.5" font-family="Times,serif" font-size="14.00">src/v2/DatabaseManager.sol</text>
<polyline fill="none" stroke="black" points="0,-674.3 465.16,-674.3 "/>
<text text-anchor="start" x="8" y="-657.7" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="8" y="-640.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;OWNER_ROLE: bytes32</text>
<text text-anchor="start" x="8" y="-624.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_tableIDs: EnumerableSet.Bytes32Set</text>
<text text-anchor="start" x="8" y="-607.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_queriesByTable: mapping(bytes32=&gt;EnumerableSet.Bytes32Set)</text>
<text text-anchor="start" x="8" y="-590.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_queries: mapping(bytes32=&gt;bytes32)</text>
<text text-anchor="start" x="8" y="-573.7" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-556.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;VERSION: string</text>
<polyline fill="none" stroke="black" points="0,-548.7 465.16,-548.7 "/>
<text text-anchor="start" x="8" y="-532.1" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="8" y="-515.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;registerTable(id: bytes32) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="8" y="-498.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;deleteTable(id: bytes32) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="8" y="-481.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;deleteQuery(queryHash: bytes32) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="8" y="-464.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;registerQuery(hash: bytes32, tableID: bytes32, sql: string)</text>
<text text-anchor="start" x="8" y="-448.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;isTableActive(id: bytes32): bool</text>
<text text-anchor="start" x="8" y="-431.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getTableForQuery(queryHash: bytes32): bytes32</text>
<text text-anchor="start" x="8" y="-414.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getTables(start: uint256, end: uint256): bytes32[]</text>
<text text-anchor="start" x="8" y="-397.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getQueries(tableID: bytes32, start: uint256, end: uint256): bytes32[]</text>
<text text-anchor="start" x="8" y="-380.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getNumTables(): uint256</text>
<text text-anchor="start" x="8" y="-364.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getNumQueries(tableID: bytes32): uint256</text>
<text text-anchor="start" x="8" y="-347.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-330.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewTableRegistered(id: bytes32)</text>
<text text-anchor="start" x="8" y="-313.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; TableDeleted(id: bytes32)</text>
<text text-anchor="start" x="8" y="-296.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; QueryDeleted(hash: bytes32)</text>
<text text-anchor="start" x="8" y="-280.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewQueryRegistered(hash: bytes32, tableID: bytes32, sql: string)</text>
<text text-anchor="start" x="8" y="-263.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="8" y="-246.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize(initialOwner: address) &lt;&lt;initializer&gt;&gt;</text>
<text text-anchor="start" x="8" y="-229.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;isQueryActive(hash: bytes32): bool</text>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="black" points="1085.9,-0.5 1085.9,-167.7 2039.25,-167.7 2039.25,-0.5 1085.9,-0.5"/>
<text text-anchor="middle" x="1562.58" y="-151.1" font-family="Times,serif" font-size="14.00">Deployer</text>
<text text-anchor="middle" x="1562.58" y="-134.3" font-family="Times,serif" font-size="14.00">src/v2/Deployer.sol</text>
<polyline fill="none" stroke="black" points="1085.9,-126.1 2039.25,-126.1 "/>
<text text-anchor="start" x="1093.9" y="-109.5" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="1093.9" y="-92.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getDefaultFeeParams(): QueryExecutor.Config</text>
<text text-anchor="start" x="1093.9" y="-75.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1093.9" y="-59.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;deployQueryExecutor(engMultisig: address, routerProxy: address, dbManagerProxy: address, feeCollector: address, config: QueryExecutor.Config): QueryExecutor</text>
<text text-anchor="start" x="1093.9" y="-42.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1093.9" y="-25.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ContractsDeployed(routerProxy: address, dbManagerProxy: address, feeCollector: address, queryExecutor: address, testClient: address)</text>
<text text-anchor="start" x="1093.9" y="-8.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(engMultisig: address, financeMultisig: address)</text>
</g>
<!-- 1&#45;&gt;0 -->
<g id="edge2" class="edge">
<title>1&#45;&gt;0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1085.58,-104.42C844.52,-120.69 580.97,-150.36 474.58,-204.2 467.47,-207.8 460.46,-211.7 453.57,-215.86"/>
<polygon fill="black" stroke="black" points="451.53,-213.01 444.89,-221.27 455.23,-218.95 451.53,-213.01"/>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="black" points="483.28,-330.7 483.28,-606.7 953.87,-606.7 953.87,-330.7 483.28,-330.7"/>
<text text-anchor="middle" x="718.58" y="-590.1" font-family="Times,serif" font-size="14.00">FeeCollector</text>
<text text-anchor="middle" x="718.58" y="-573.3" font-family="Times,serif" font-size="14.00">src/v2/FeeCollector.sol</text>
<polyline fill="none" stroke="black" points="483.28,-565.1 953.87,-565.1 "/>
<text text-anchor="start" x="491.28" y="-548.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="491.28" y="-531.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;VERSION: string</text>
<polyline fill="none" stroke="black" points="483.28,-523.5 953.87,-523.5 "/>
<text text-anchor="start" x="491.28" y="-506.9" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="491.28" y="-490.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; null()</text>
<text text-anchor="start" x="491.28" y="-473.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;receiveERC20(token: address, amount: uint256)</text>
<text text-anchor="start" x="491.28" y="-456.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;withdrawNative(to: address) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="491.28" y="-439.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;withdrawERC20(token: address, to: address) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="491.28" y="-422.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="491.28" y="-406.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NativeReceived(sender: address, amount: uint256)</text>
<text text-anchor="start" x="491.28" y="-389.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ERC20Received(token: address, sender: address, amount: uint256)</text>
<text text-anchor="start" x="491.28" y="-372.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NativeWithdrawn(to: address, amount: uint256)</text>
<text text-anchor="start" x="491.28" y="-355.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ERC20Withdrawn(token: address, to: address, amount: uint256)</text>
<text text-anchor="start" x="491.28" y="-338.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(initialOwner: address)</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge3" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1085.79,-150.52C1042.81,-165.02 1001.04,-182.69 962.58,-204.2 909.98,-233.61 862.32,-278.38 823.36,-322.71"/>
<polygon fill="black" stroke="black" points="820.6,-320.55 816.69,-330.4 825.88,-325.14 820.6,-320.55"/>
</g>
<!-- 7 -->
<g id="node5" class="node">
<title>7</title>
<polygon fill="#f2f2f2" stroke="black" points="971.91,-238.3 971.91,-699.1 2153.25,-699.1 2153.25,-238.3 971.91,-238.3"/>
<text text-anchor="middle" x="1562.58" y="-682.5" font-family="Times,serif" font-size="14.00">LagrangeQueryRouter</text>
<text text-anchor="middle" x="1562.58" y="-665.7" font-family="Times,serif" font-size="14.00">src/v2/LagrangeQueryRouter.sol</text>
<polyline fill="none" stroke="black" points="971.91,-657.5 2153.25,-657.5 "/>
<text text-anchor="start" x="979.91" y="-640.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="979.91" y="-624.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_defaultQueryExecutor: IQueryExecutor</text>
<text text-anchor="start" x="979.91" y="-607.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_enabledExecutors: EnumerableSet.AddressSet</text>
<text text-anchor="start" x="979.91" y="-590.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="979.91" y="-573.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;VERSION: string</text>
<polyline fill="none" stroke="black" points="971.91,-565.5 2153.25,-565.5 "/>
<text text-anchor="start" x="979.91" y="-548.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="979.91" y="-532.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_requestTo(executor: IQueryExecutor, queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256): uint256</text>
<text text-anchor="start" x="979.91" y="-515.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_setDefaultQueryExecutor(queryExecutor: IQueryExecutor)</text>
<text text-anchor="start" x="979.91" y="-498.5" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="979.91" y="-481.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; request(queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256): uint256</text>
<text text-anchor="start" x="979.91" y="-464.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; request(queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256): uint256</text>
<text text-anchor="start" x="979.91" y="-448.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;respond(requestId: uint256, executor: IQueryExecutor, data: bytes32[])</text>
<text text-anchor="start" x="979.91" y="-431.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;registerQuery(hash: bytes32, tableID: bytes32, sql: string)</text>
<text text-anchor="start" x="979.91" y="-414.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFee(queryHash: bytes32, callbackGasLimit: uint256, blockRange: uint256): uint256</text>
<text text-anchor="start" x="979.91" y="-397.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setExecutorEnabled(executor: IQueryExecutor, enabled: bool) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="979.91" y="-380.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getDefaultQueryExecutor(): (queryExecutor: IQueryExecutor)</text>
<text text-anchor="start" x="979.91" y="-364.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getEnabledExecutors(): (queryExecutors: address[])</text>
<text text-anchor="start" x="979.91" y="-347.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="979.91" y="-330.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; requestTo(executor: IQueryExecutor, queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256): uint256</text>
<text text-anchor="start" x="979.91" y="-313.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewRequest(requestId: uint256, queryExecutor: address, client: address)</text>
<text text-anchor="start" x="979.91" y="-296.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewResponse(requestId: uint256, queryExecutor: address, client: address, success: bool)</text>
<text text-anchor="start" x="979.91" y="-280.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor()</text>
<text text-anchor="start" x="979.91" y="-263.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize(owner: address, queryExecutor: IQueryExecutor) &lt;&lt;initializer&gt;&gt;</text>
<text text-anchor="start" x="979.91" y="-246.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setDefaultQueryExecutor(queryExecutor: IQueryExecutor) &lt;&lt;onlyOwner&gt;&gt;</text>
</g>
<!-- 1&#45;&gt;7 -->
<g id="edge1" class="edge">
<title>1&#45;&gt;7</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1562.58,-168.12C1562.58,-186.43 1562.58,-206.71 1562.58,-227.84"/>
<polygon fill="black" stroke="black" points="1559.08,-227.94 1562.58,-237.94 1566.08,-227.94 1559.08,-227.94"/>
</g>
<!-- 8 -->
<g id="node6" class="node">
<title>8</title>
<polygon fill="#f2f2f2" stroke="black" points="2171.58,-204.7 2171.58,-732.7 3387.57,-732.7 3387.57,-204.7 2171.58,-204.7"/>
<text text-anchor="middle" x="2779.58" y="-716.1" font-family="Times,serif" font-size="14.00">QueryExecutor</text>
<text text-anchor="middle" x="2779.58" y="-699.3" font-family="Times,serif" font-size="14.00">src/v2/QueryExecutor.sol</text>
<polyline fill="none" stroke="black" points="2171.58,-691.1 3387.57,-691.1 "/>
<text text-anchor="start" x="2179.58" y="-674.5" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="2179.58" y="-657.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;ROUTER: address</text>
<text text-anchor="start" x="2179.58" y="-640.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;DB_MANAGER: IDatabaseManager</text>
<text text-anchor="start" x="2179.58" y="-624.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;FEE_COLLECTOR: address</text>
<text text-anchor="start" x="2179.58" y="-607.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_requestIDNonce: uint256</text>
<text text-anchor="start" x="2179.58" y="-590.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_config: Config</text>
<text text-anchor="start" x="2179.58" y="-573.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;s_requests: mapping(uint256=&gt;QueryRequest)</text>
<text text-anchor="start" x="2179.58" y="-556.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2179.58" y="-540.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;SUPPORTS_L1_BLOCKDATA: bool</text>
<polyline fill="none" stroke="black" points="2171.58,-531.9 3387.57,-531.9 "/>
<text text-anchor="start" x="2179.58" y="-515.3" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="2179.58" y="-498.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_validateQueryRange(startBlock: uint256, endBlock: uint256, maxQueryRange: uint256)</text>
<text text-anchor="start" x="2179.58" y="-481.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="2179.58" y="-464.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyBlockHash(blockHash: bytes32, expectedBlockHash: bytes32)</text>
<text text-anchor="start" x="2179.58" y="-448.1" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="2179.58" y="-431.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; request(client: address, queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256): uint256 &lt;&lt;onlyRouter&gt;&gt;</text>
<text text-anchor="start" x="2179.58" y="-414.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;respond(requestId: uint256, data: bytes32[]): (address, uint256, QueryOutput) &lt;&lt;onlyRouter&gt;&gt;</text>
<text text-anchor="start" x="2179.58" y="-397.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setConfig(config: Config) &lt;&lt;onlyOwner&gt;&gt;</text>
<text text-anchor="start" x="2179.58" y="-380.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getRequest(requestId: uint256): QueryRequest</text>
<text text-anchor="start" x="2179.58" y="-364.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getConfig(): Config</text>
<text text-anchor="start" x="2179.58" y="-347.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getRouter(): address</text>
<text text-anchor="start" x="2179.58" y="-330.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getDBManager(): address</text>
<text text-anchor="start" x="2179.58" y="-313.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFeeCollector(): address</text>
<text text-anchor="start" x="2179.58" y="-296.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2179.58" y="-280.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewRequest(requestId: uint256, queryHash: bytes32, client: address, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256, fee: uint256, proofBlock: uint256)</text>
<text text-anchor="start" x="2179.58" y="-263.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewResponse(requestId: uint256, client: address, result: QueryOutput)</text>
<text text-anchor="start" x="2179.58" y="-246.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyRouter()</text>
<text text-anchor="start" x="2179.58" y="-229.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(initialOwner: address, router: address, dbManager: address, feeCollector: address, config: Config)</text>
<text text-anchor="start" x="2179.58" y="-212.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFee(queryHash: bytes32, callbackGasLimit: uint256, blockRange: uint256): uint256</text>
</g>
<!-- 1&#45;&gt;8 -->
<g id="edge4" class="edge">
<title>1&#45;&gt;8</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2028.88,-167.73C2071.54,-178.07 2113.93,-189.4 2161.72,-203.98"/>
<polygon fill="black" stroke="black" points="2160.77,-207.34 2171.36,-206.94 2162.83,-200.65 2160.77,-207.34"/>
</g>
<!-- 12 -->
<g id="node8" class="node">
<title>12</title>
<polygon fill="#f2f2f2" stroke="black" points="3406.07,-355.9 3406.07,-581.5 4419.09,-581.5 4419.09,-355.9 3406.07,-355.9"/>
<text text-anchor="middle" x="3912.58" y="-564.9" font-family="Times,serif" font-size="14.00">LPNClientV2Example</text>
<text text-anchor="middle" x="3912.58" y="-548.1" font-family="Times,serif" font-size="14.00">src/v2/client/LPNClientV2Example.sol</text>
<polyline fill="none" stroke="black" points="3406.07,-539.9 4419.09,-539.9 "/>
<text text-anchor="start" x="3414.07" y="-523.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="3414.07" y="-506.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;lpnRouter: ILagrangeQueryRouter</text>
<polyline fill="none" stroke="black" points="3406.07,-498.3 4419.09,-498.3 "/>
<text text-anchor="start" x="3414.07" y="-481.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="3414.07" y="-464.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; request(queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256): uint256</text>
<text text-anchor="start" x="3414.07" y="-448.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; request(queryHash: bytes32, callbackGasLimit: uint256, placeholders: bytes32[], startBlock: uint256, endBlock: uint256, limit: uint256, offset: uint256): uint256</text>
<text text-anchor="start" x="3414.07" y="-431.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;lpnCallback(requestId: uint256, result: QueryOutput) &lt;&lt;onlyLagrangeRouter&gt;&gt;</text>
<text text-anchor="start" x="3414.07" y="-414.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="3414.07" y="-397.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; NewResponse(requestId: uint256, result: QueryOutput)</text>
<text text-anchor="start" x="3414.07" y="-380.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;modifier&gt;&gt; onlyLagrangeRouter()</text>
<text text-anchor="start" x="3414.07" y="-364.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(router: address)</text>
</g>
<!-- 1&#45;&gt;12 -->
<g id="edge5" class="edge">
<title>1&#45;&gt;12</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2039.31,-94.22C2495.84,-106.9 3150.51,-136.5 3396.58,-204.2 3512.96,-236.22 3633.62,-296.12 3728.97,-350.73"/>
<polygon fill="black" stroke="black" points="3727.41,-353.87 3737.82,-355.83 3730.9,-347.81 3727.41,-353.87"/>
</g>
<!-- 6 -->
<g id="node4" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="black" points="2571.74,-769.7 2571.74,-1297.7 2987.42,-1297.7 2987.42,-769.7 2571.74,-769.7"/>
<text text-anchor="middle" x="2779.58" y="-1281.1" font-family="Times,serif" font-size="14.00">Groth16VerifierExtension</text>
<text text-anchor="middle" x="2779.58" y="-1264.3" font-family="Times,serif" font-size="14.00">src/v2/Groth16VerifierExtension.sol</text>
<polyline fill="none" stroke="black" points="2571.74,-1256.1 2987.42,-1256.1 "/>
<text text-anchor="start" x="2579.74" y="-1239.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2579.74" y="-1222.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;TOP_THREE_BIT_MASK: uint256</text>
<text text-anchor="start" x="2579.74" y="-1205.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;MAX_NUM_OUTPUTS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1189.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;MAX_NUM_ITEMS_PER_OUTPUT: uint32</text>
<text text-anchor="start" x="2579.74" y="-1172.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;MAX_NUM_PLACEHOLDERS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1155.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;PI_OFFSET: uint32</text>
<text text-anchor="start" x="2579.74" y="-1138.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;BLOCK_HASH_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1121.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;COMPUTATIONAL_HASH_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1105.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;PLACEHOLDER_VALUES_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1088.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;RESULT_VALUES_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1071.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;PI_REM_OFFSET: uint32</text>
<text text-anchor="start" x="2579.74" y="-1054.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_NUM_PLACEHOLDERS_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1037.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_NUM_RESULTS_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1021.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_ENTRY_COUNT_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-1004.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_OVERFLOW_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-987.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_QUERY_LIMIT_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-970.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;REM_QUERY_OFFSET_POS: uint32</text>
<text text-anchor="start" x="2579.74" y="-953.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;PI_LEN: uint32</text>
<polyline fill="none" stroke="black" points="2571.74,-945.7 2987.42,-945.7 "/>
<text text-anchor="start" x="2579.74" y="-929.1" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="2579.74" y="-912.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyGroth16Proof(data: bytes32[]): uint256[3]</text>
<text text-anchor="start" x="2579.74" y="-895.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyPublicInputs(data: bytes32[], groth16Inputs: uint256[3])</text>
<text text-anchor="start" x="2579.74" y="-878.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;parsePublicInputs(data: bytes32[]): bytes</text>
<text text-anchor="start" x="2579.74" y="-861.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyQuery(data: bytes32[], query: QueryInput): QueryErrorCode</text>
<text text-anchor="start" x="2579.74" y="-845.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyBlockHash(blockHash: bytes32, expectedBlockHash: bytes32)</text>
<text text-anchor="start" x="2579.74" y="-828.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;parseOutput(data: bytes32[], error: QueryErrorCode): QueryOutput</text>
<text text-anchor="start" x="2579.74" y="-811.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;convertToBlockHash(original: bytes32): bytes32</text>
<text text-anchor="start" x="2579.74" y="-794.7" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2579.74" y="-777.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;processQuery(data: bytes32[], query: QueryInput): QueryOutput</text>
</g>
<!-- 11 -->
<g id="node7" class="node">
<title>11</title>
<polygon fill="#f2f2f2" stroke="black" points="2502.29,-1334.7 2502.29,-2249.1 3056.86,-2249.1 3056.86,-1334.7 2502.29,-1334.7"/>
<text text-anchor="middle" x="2779.58" y="-2232.5" font-family="Times,serif" font-size="14.00">Verifier</text>
<text text-anchor="middle" x="2779.58" y="-2215.7" font-family="Times,serif" font-size="14.00">src/v2/Verifier.sol</text>
<polyline fill="none" stroke="black" points="2502.29,-2207.5 3056.86,-2207.5 "/>
<text text-anchor="start" x="2510.29" y="-2190.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2510.29" y="-2174.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;PRECOMPILE_MODEXP: uint256</text>
<text text-anchor="start" x="2510.29" y="-2157.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;PRECOMPILE_ADD: uint256</text>
<text text-anchor="start" x="2510.29" y="-2140.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;PRECOMPILE_MUL: uint256</text>
<text text-anchor="start" x="2510.29" y="-2123.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;PRECOMPILE_VERIFY: uint256</text>
<text text-anchor="start" x="2510.29" y="-2106.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;P: uint256</text>
<text text-anchor="start" x="2510.29" y="-2090.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;R: uint256</text>
<text text-anchor="start" x="2510.29" y="-2073.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;FRACTION_1_2_FP: uint256</text>
<text text-anchor="start" x="2510.29" y="-2056.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;FRACTION_27_82_FP: uint256</text>
<text text-anchor="start" x="2510.29" y="-2039.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;FRACTION_3_82_FP: uint256</text>
<text text-anchor="start" x="2510.29" y="-2022.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;EXP_INVERSE_FP: uint256</text>
<text text-anchor="start" x="2510.29" y="-2006.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;EXP_SQRT_FP: uint256</text>
<text text-anchor="start" x="2510.29" y="-1989.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;ALPHA_X: uint256</text>
<text text-anchor="start" x="2510.29" y="-1972.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;ALPHA_Y: uint256</text>
<text text-anchor="start" x="2510.29" y="-1955.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;BETA_NEG_X_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1938.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;BETA_NEG_X_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1922.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;BETA_NEG_Y_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1905.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;BETA_NEG_Y_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1888.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;GAMMA_NEG_X_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1871.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;GAMMA_NEG_X_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1854.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;GAMMA_NEG_Y_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1838.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;GAMMA_NEG_Y_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1821.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;DELTA_NEG_X_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1804.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;DELTA_NEG_X_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1787.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;DELTA_NEG_Y_0: uint256</text>
<text text-anchor="start" x="2510.29" y="-1770.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;DELTA_NEG_Y_1: uint256</text>
<text text-anchor="start" x="2510.29" y="-1754.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;CONSTANT_X: uint256</text>
<text text-anchor="start" x="2510.29" y="-1737.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;CONSTANT_Y: uint256</text>
<text text-anchor="start" x="2510.29" y="-1720.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_0_X: uint256</text>
<text text-anchor="start" x="2510.29" y="-1703.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_0_Y: uint256</text>
<text text-anchor="start" x="2510.29" y="-1686.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_1_X: uint256</text>
<text text-anchor="start" x="2510.29" y="-1670.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_1_Y: uint256</text>
<text text-anchor="start" x="2510.29" y="-1653.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_2_X: uint256</text>
<text text-anchor="start" x="2510.29" y="-1636.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;PUB_2_Y: uint256</text>
<text text-anchor="start" x="2510.29" y="-1619.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;CIRCUIT_DIGEST: bytes32</text>
<polyline fill="none" stroke="black" points="2502.29,-1611.5 3056.86,-1611.5 "/>
<text text-anchor="start" x="2510.29" y="-1594.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="2510.29" y="-1578.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;negate(a: uint256): (x: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1561.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;exp(a: uint256, e: uint256): (x: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1544.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;invert_Fp(a: uint256): (x: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1527.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sqrt_Fp(a: uint256): (x: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1510.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;isSquare_Fp(a: uint256): bool</text>
<text text-anchor="start" x="2510.29" y="-1494.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sqrt_Fp2(a0: uint256, a1: uint256, hint: bool): (x0: uint256, x1: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1477.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;compress_g1(x: uint256, y: uint256): (c: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1460.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decompress_g1(c: uint256): (x: uint256, y: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1443.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;compress_g2(x0: uint256, x1: uint256, y0: uint256, y1: uint256): (c0: uint256, c1: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1426.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decompress_g2(c0: uint256, c1: uint256): (x0: uint256, x1: uint256, y0: uint256, y1: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1410.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;publicInputMSM(input: uint256[3]): (x: uint256, y: uint256)</text>
<text text-anchor="start" x="2510.29" y="-1393.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2510.29" y="-1376.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;compressProof(proof: uint256[8]): (compressed: uint256[4])</text>
<text text-anchor="start" x="2510.29" y="-1359.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyCompressedProof(compressedProof: uint256[4], input: uint256[3])</text>
<text text-anchor="start" x="2510.29" y="-1342.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;verifyProof(proof: uint256[8], input: uint256[3])</text>
</g>
<!-- 6&#45;&gt;11 -->
<g id="edge6" class="edge">
<title>6&#45;&gt;11</title>
<path fill="none" stroke="black" d="M2779.58,-1297.86C2779.58,-1300.02 2779.58,-1302.19 2779.58,-1304.36"/>
<polygon fill="none" stroke="black" points="2769.08,-1304.45 2779.58,-1334.45 2790.08,-1304.45 2769.08,-1304.45"/>
</g>
<!-- 8&#45;&gt;6 -->
<g id="edge7" class="edge">
<title>8&#45;&gt;6</title>
<path fill="none" stroke="black" d="M2779.58,-733.07C2779.58,-735.16 2779.58,-737.25 2779.58,-739.34"/>
<polygon fill="none" stroke="black" points="2769.08,-739.6 2779.58,-769.6 2790.08,-739.6 2769.08,-739.6"/>
</g>
</g>
</svg>
