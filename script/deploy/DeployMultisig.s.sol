// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;

import {Script} from "forge-std/Script.sol";

/// @dev Deploy multsigs with the same address (0xE7cdA508FEB53713fB7C69bb891530C924980366)
/// to various EVM chains (except for zkSync !)
contract DeployMultisig is Script {
    /// @dev Deploys a 3 / 5 multisig with signers
    /// Kashish 0xD1B55c3EAE5Fe41A48B23D6B0EdA462a204C745d
    /// Ismael 0xFBF21Db575E16c36f1433Dd0153E36FEc83E8a3a
    /// Omar 0xBE09E7a5651D6F350B5Ea41c7bBc8AbDB7fe9199
    /// Amir 0x5140E9f08d6EDc03EB746e5141b85b960Ec19056
    /// Jonathan 0x2DaB73f7b4beCA44b8bC4dcd5e2043bE87d0420b
    bytes constant SAFE_DEPLOY_INPUT =
        hex"1688f0b9000000000000000000000000d9db270c1b5e3bd161e8c8503c55ceabee7095520000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e4b63e800d00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000f48f2b2d2a534e402487b3ee7c18c33aec0fe5e40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000d1b55c3eae5fe41a48b23d6b0eda462a204c745d000000000000000000000000fbf21db575e16c36f1433dd0153e36fec83e8a3a000000000000000000000000be09e7a5651d6f350b5ea41c7bbc8abdb7fe91990000000000000000000000005140e9f08d6edc03eb746e5141b85b960ec190560000000000000000000000002dab73f7b4beca44b8bc4dcd5e2043be87d0420b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

    /// @dev Address of Gnosis Factory for most EVM chains; deploys Safe Proxy 1.3
    address SAFE_PROXY_FACTORY_ADDR = 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2;

    modifier broadcaster() {
        vm.startBroadcast();
        _;
        vm.stopBroadcast();
    }

    function run() external broadcaster {
        deploy();
    }

    function deploy() public {
        (bool sent,) = SAFE_PROXY_FACTORY_ADDR.call(SAFE_DEPLOY_INPUT);

        require(sent, "Failed to deploy multisig");
    }
}
